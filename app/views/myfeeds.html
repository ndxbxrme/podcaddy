
<div class="allfeeds">
  <div class="pure-g">
    <!--<h2 ng-show="lazyLoad.items.length>0">Select some feeds then start listening <a href="/">here</a></h2>-->
    <div class="no-overflow">
      <div class="popular" ng-init="limit=10">
        <allfeedsitem ng-repeat="feed in lazyLoad.items | orderBy:'-listensWeek' | limitTo:limit | limitTo:-10" feed="feed" class="pure-u-1-5">
        </allfeedsitem>
        <div class="pop-left">
          <span ng-repeat="feed in lazyLoad.items | orderBy:'-listensWeek' | limitTo:(limit+20) | limitTo:-10" feed="feed" class="pure-u-1-5">
            <img ng-src="{{feed.cloudinary.secure_url}}" />
          </span>       
        </div>
        <div class="pop-right">
          <span ng-repeat="feed in lazyLoad.items | orderBy:'-listensWeek' | limitTo:(limit+10) | limitTo:-10" feed="feed" class="pure-u-1-5">
            <img ng-src="{{feed.cloudinary.secure_url}}" />
          </span>             
        </div>
        <div class="prev" ng-click="limit = limit - 10" ng-show="limit>10">&nbsp;&nbsp;&nbsp;&nbsp;</div>
        <div class="next" ng-click="limit = limit + 10" ng-show="limit<lazyLoad.items.length">&nbsp;&nbsp;&nbsp;&nbsp;</div>
      </div>
    </div>
    <div class="pure-u-1 categories"><br /></div>
    <div ng-show="!loading && lazyLoad.items.length > 0" ng-repeat="cat in ['Comedy','Technology','TV & Film','Arts','Entertainment','Games & Hobbies','Health','Music','News','Politics','Religion','Spirituality','Science','Culture','Sports']" class="pure-u-1-2 pure-u-sm-1-3 pure-u-lg-1-5 pure-button" ng-class="{'pure-button-primary':$parent.category===cat}" ng-click="$parent.start=12;($parent.category===cat)?$parent.category=undefined:$parent.category=cat">{{cat}}</div>
  </div>
  <div class="paging pure-g" ng-show="filteredItems.length>0">
    <div class="pure-u-1-2 count">
      {{category?category:'Unfiltered'}}, {{(start>filteredItems.length)?(filteredItems.length-12>0)?filteredItems.length-12:1:start-11}} - {{(start>filteredItems.length)?filteredItems.length:start}} / {{filteredItems.length}}
    </div>
    <div class="pure-u-1-2" style="text-align:right">
      <a ng-disabled="start<13" ng-click="start<13 || (start = start - 12)" class="pure-button">&lt;&lt; Prev</a>
      <a ng-disabled="start>filteredItems.length" ng-click="start>filteredItems.length || (start = start + 12)" class="pure-button">Next &gt;&gt;</a>
    </div>
  </div>
  <div class="pure-g directory" ng-init="start=12">
    <directoryitem class="list-feed pure-u-1 pure-u-sm-1-2 pure-u-lg-1-4" ng-repeat="feed in filteredItems = ( lazyLoad.items | orderBy:'title' | filter:{categories:category} | filter:search.url) | limitTo:start | limitTo:-12" feed="feed">
    </directoryitem>
  </div>
  <div class="paging pure-g" ng-show="filteredItems.length>0">
    <div class="pure-u-1-2 count">
    </div>
    <div class="pure-u-1-2" style="text-align:right">
      <a ng-disabled="start<13" ng-click="start<13 || (start = start - 12)" class="pure-button" onclick="$.scrollTo('.categories',600,{axis:'y'})">&lt;&lt; Prev</a>
      <a ng-disabled="start>filteredItems.length" ng-click="start>filteredItems.length || (start = start + 12)" class="pure-button" onclick="$.scrollTo('.categories',600,{axis:'y'})">Next &gt;&gt;</a>
    </div>
  </div>
  <div class="text-center">
      <a class="pure-button" ng-click="initFeeds()" ng-show="lazyLoad.items.length===0&&!loading">Oh no! There are no feeds.</a>
  </div>
</div>